- name: Ensure Wordpress directory exists
  file:
    path: "{{ wordpress_site_dir }}"
    state: directory
    mode: "0755"

- name: Copy .env file
  copy:
    src: .env
    dest: "{{ wordpress_site_dir }}/.env"
    mode: "0600"

- name: Template docker-compose.yml
  template:
    src: docker-compose.yml.j2
    dest: "{{ wordpress_site_dir }}/docker-compose.yml"
    mode: "0644"

- name: Launch Wordpress using Docker Compose
  community.docker.docker_compose_v2:
    project_src: "{{ wordpress_site_dir }}"
    state: present
